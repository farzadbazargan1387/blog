<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Nocturne Soul</title>
    <style>
        /* ===== Insert your entire nocturne.css here ===== */
        :root{
            --bg:#0b0c10;
            --card:#0f1116;
            --muted:#9aa0a6;
            --accent:#9f6cff;
            --accent-2:#00e6b8;
            --glass: rgba(255,255,255,0.03);
            --radius:14px;
            --max-width:1100px;
            --trans:300ms;
            font-family: "Inter", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
        }

        html,body{height:100%;margin:0;background:linear-gradient(180deg,var(--bg),#050507);color:#e6e7ea;}
        .ns-container{max-width:var(--max-width);margin:0 auto;padding:24px;}

        /* Header */
        .ns-header{backdrop-filter: blur(6px);position:sticky;top:0;z-index:30;background:linear-gradient(180deg, rgba(11,12,16,0.85), rgba(11,12,16,0.65));border-bottom:1px solid rgba(255,255,255,0.03);}
        .brand{display:flex;align-items:center;gap:12px;}
        .brand-link{display:flex;align-items:center;text-decoration:none;color:inherit;}
        .brand-logo{width:48px;height:48px;border-radius:10px;background:linear-gradient(135deg,var(--accent),var(--accent-2));display:flex;align-items:center;justify-content:center;font-size:22px;box-shadow:0 6px 18px rgba(159,108,255,0.12);}
        .brand-title{font-weight:800;font-family:"Merriweather",serif;letter-spacing:0.6px;}
        .brand-sub{font-size:12px;color:var(--muted);}
        .ns-header .ns-container{display:flex;align-items:center;justify-content:space-between;gap:16px;}
        .ns-nav{display:flex;align-items:center;gap:12px;}
        .ns-search{display:flex;align-items:center;background:var(--glass);padding:6px;border-radius:999px;border:1px solid rgba(255,255,255,0.03);overflow:hidden;}
        .ns-search input[type="search"]{background:transparent;border:0;padding:8px 12px;color:inherit;outline:none;min-width:200px;}
        .btn{display:inline-flex;align-items:center;gap:8px;padding:8px 12px;border-radius:10px;border:0;background:transparent;color:inherit;text-decoration:none;cursor:pointer;transition:all var(--trans);font-weight:600;}
        .btn.small{padding:6px 10px;font-size:13px;border-radius:8px;}
        .btn.ghost{border:1px solid rgba(255,255,255,0.04);}
        .btn.primary{background:linear-gradient(90deg,var(--accent),#7a9bff);color:#08060a;box-shadow:0 8px 30px rgba(159,108,255,0.12);}

        /* layout */
        .hero{padding:40px 0;text-align:center;margin-bottom:18px;}
        .hero-title{font-family:"Merriweather",serif;font-size:38px;margin:8px 0;}
        .hero-sub{color:var(--muted);margin:0 auto;max-width:680px;}

        .posts-grid{display:grid;grid-template-columns:1fr 1fr;gap:18px;margin-bottom:24px;}
        .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:18px;border-radius:12px;border:1px solid rgba(255,255,255,0.03);transition:transform var(--trans), box-shadow var(--trans);cursor:pointer;}
        .card:hover{transform:translateY(-6px);box-shadow:0 18px 60px rgba(0,0,0,0.6);}
        .card-title{margin:0 0 8px 0;font-size:18px;}
        .card-excerpt{color:var(--muted);margin:0 0 12px 0;}
        .card-meta{font-size:13px;color:var(--muted);}

        /* sidebar */
        .sidebar{margin-top:6px;}
        .widget{background:transparent;padding:14px;border-radius:12px;border:1px solid rgba(255,255,255,0.02);margin-bottom:12px;}
        .tag-cloud .tag{display:inline-block;margin:6px 6px 0 0;padding:6px 10px;border-radius:999px;border:1px solid rgba(255,255,255,0.03);font-size:13px;color:var(--muted);text-decoration:none;}

        /* post */
        .post{max-width:850px;margin:0 auto;padding:22px;background:var(--card);border-radius:16px;border:1px solid rgba(255,255,255,0.03);}
        .post-title{font-family:"Merriweather",serif;font-size:32px;margin:0 0 10px 0;}
        .post-meta{color:var(--muted);margin-bottom:16px;}
        .post-content{line-height:1.8;color:#dfe6f2;font-size:16px;}

        /* comments */
        .comment{background:rgba(255,255,255,0.02);padding:12px;margin-bottom:10px;border-radius:10px;}
        .comment-meta{color:var(--muted);font-size:13px;margin-bottom:6px;}
        .comment-form input, .comment-form textarea{width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.03);background:transparent;color:inherit;margin-bottom:8px;}

        /* animations */
        .ns-animate-up{opacity:0;transform:translateY(8px);animation:up 560ms ease forwards;}
        .ns-animate-left{opacity:0;transform:translateX(-10px);animation:left 560ms ease forwards;}
        @keyframes up{to{opacity:1;transform:none;}}
        @keyframes left{to{opacity:1;transform:none;}}

        /* responsive */
        @media (max-width:900px){
            .posts-grid{grid-template-columns:1fr;}
            .ns-search input{min-width:120px;}
            .ns-header .ns-container{flex-direction:column;align-items:flex-start;gap:12px;}
            .nav-links{display:flex;flex-wrap:wrap;gap:8px;}
            .sidebar{display:none;}
        }

        /* mobile menu */
        .ns-hamburger{display:none;border:0;background:transparent;cursor:pointer;padding:8px;}
        .ns-hamburger span{display:block;width:22px;height:2px;background:linear-gradient(90deg,#fff,#bbb);margin:4px 0;border-radius:2px;transition:all 220ms;}
        @media (max-width:720px){
            .ns-hamburger{display:block;}
            .nav-links{display:none;}
            body.ns-open .nav-links{display:flex;flex-direction:column;width:100%;}
        }
    </style>
</head>
<body>
<header class="ns-header ns-animate-up">
    <div class="ns-container">
        <a href="/" class="brand-link brand">
            <div class="brand-logo">NS</div>
            <div>
                <div class="brand-title">Nocturne Soul</div>
                <div class="brand-sub">Voice of the night</div>
            </div>
        </a>

        <nav class="ns-nav">
            <form th:action="@{/search}" method="get" class="ns-search">
                <input type="search" name="q" placeholder="Search..." />
            </form>

            <div th:if="${#authentication != null}">
                <span th:text="${#authentication.name}">Username</span>
                <a th:href="@{/admin}" class="btn small">Admin Dashboard</a>
                <a th:href="@{/logout}" class="btn small">Logout</a>
            </div>
            <div th:if="${#authentication == null}">
                <a th:href="@{/login}" class="btn small">Login</a>
                <a th:href="@{/register}" class="btn small">Register</a>
            </div>

        </nav>
    </div>
</header>

<main class="ns-container">
    <!-- Index posts grid -->
    <section th:if="${posts != null}" class="posts-grid ns-animate-up">
        <div th:each="p : ${posts.content}">
            <article class="card">
                <a th:href="@{/posts/{slug}(slug=${p.slug})}" class="card-link">
                    <h2 th:text="${p.title}" class="card-title">Post Title</h2>
                    <p th:text="${p.excerpt}" class="card-excerpt">Post excerpt</p>
                </a>
                <div class="card-meta">
                    <span th:text="${p.author != null ? p.author.fullName : 'Unknown'}">Author</span> ·
                    <time th:text="${post.publishedAt != null ? #temporals.format(post.publishedAt, 'dd MMM yyyy') : ''}">date</time>

                </div>
            </article>
        </div>
        <div th:if="${#lists.isEmpty(posts.content)}">
            <p>No posts available.</p>
        </div>
    </section>

    <!-- Single post detail -->
    <article th:if="${post != null}" class="post post_detail ns-animate-up">
        <header class="post-header">
            <h1 th:text="${post.title}" class="post-title">Title</h1>
            <div class="post-meta">
                <span th:text="${post.author != null ? post.author.fullName : 'Unknown'}">Author</span>
                · <time th:text="${post.publishedAt != null ? #dates.format(post.publishedAt,'dd MMM yyyy') : ''}">date</time>
            </div>
        </header>

        <section class="post-content" th:utext="${post.content}">
            <!-- post HTML content -->
        </section>

        <section class="comments ns-animate-up">
            <h3>Comments</h3>
            <div th:each="c : ${comments}" class="comment">
                <div class="comment-meta">
                    <strong th:text="${c.authorName}">Name</strong>
                    • <span th:text="${#dates.format(c.createdAt,'dd MMM yyyy')}">date</span>
                </div>
                <p th:text="${c.content}">Comment text</p>
            </div>

            <form th:action="@{/posts/{slug}/comments(slug=${post.slug})}" method="post" class="comment-form">
                <input name="authorName" placeholder="Your name" required />
                <input name="authorEmail" type="email" placeholder="Your email" required />
                <textarea name="content" placeholder="Write your comment..." required></textarea>
                <button class="btn primary" type="submit">Submit comment</button>
            </form>
        </section>
    </article>

    <!-- Sidebar -->
    <aside class="sidebar ns-animate-left">
        <div class="widget">
            <h3>Categories</h3>
            <ul>
                <li th:each="c : ${categories}" th:if="${c != null}">
                    <a th:href="@{|/categories/${c.slug}|}" th:text="${c.name}">Category</a>
                </li>
            </ul>
        </div>

        <div class="widget">
            <h3>Tags</h3>
            <div class="tag-cloud">
                <a th:each="t : ${tags}" th:if="${t != null}" th:href="@{|/tags/${t.slug}|}" th:text="${t.name}" class="tag">Tag</a>
            </div>
        </div>
    </aside>
</main>

<div th:replace="fragments/footer :: footer"></div>
<script th:src="@{/js/nocturne.js}"></script>
</body>
</html>
